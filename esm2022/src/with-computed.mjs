import { excludeKeys } from './helpers';
export function withComputed(signalsFactory) {
    return (store) => {
        const computedSignals = signalsFactory({
            ...store.stateSignals,
            ...store.computedSignals,
        });
        const computedSignalsKeys = Object.keys(computedSignals);
        const stateSignals = excludeKeys(store.stateSignals, computedSignalsKeys);
        const methods = excludeKeys(store.methods, computedSignalsKeys);
        return {
            ...store,
            stateSignals,
            computedSignals: { ...store.computedSignals, ...computedSignals },
            methods,
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2l0aC1jb21wdXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL21vZHVsZXMvc2lnbmFscy9zcmMvd2l0aC1jb21wdXRlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBV3hDLE1BQU0sVUFBVSxZQUFZLENBSTFCLGNBRW9CO0lBS3BCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNmLE1BQU0sZUFBZSxHQUFHLGNBQWMsQ0FBQztZQUNyQyxHQUFHLEtBQUssQ0FBQyxZQUFZO1lBQ3JCLEdBQUcsS0FBSyxDQUFDLGVBQWU7U0FDekIsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3pELE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLG1CQUFtQixDQUFDLENBQUM7UUFDMUUsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztRQUVoRSxPQUFPO1lBQ0wsR0FBRyxLQUFLO1lBQ1IsWUFBWTtZQUNaLGVBQWUsRUFBRSxFQUFFLEdBQUcsS0FBSyxDQUFDLGVBQWUsRUFBRSxHQUFHLGVBQWUsRUFBRTtZQUNqRSxPQUFPO1NBQ3NELENBQUM7SUFDbEUsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4Y2x1ZGVLZXlzIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7XG4gIEVtcHR5RmVhdHVyZVJlc3VsdCxcbiAgSW5uZXJTaWduYWxTdG9yZSxcbiAgU2lnbmFsc0RpY3Rpb25hcnksXG4gIFNpZ25hbFN0b3JlRmVhdHVyZSxcbiAgU2lnbmFsU3RvcmVGZWF0dXJlUmVzdWx0LFxuICBTdGF0ZVNpZ25hbHMsXG59IGZyb20gJy4vc2lnbmFsLXN0b3JlLW1vZGVscyc7XG5pbXBvcnQgeyBQcmV0dGlmeSB9IGZyb20gJy4vdHMtaGVscGVycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoQ29tcHV0ZWQ8XG4gIElucHV0IGV4dGVuZHMgU2lnbmFsU3RvcmVGZWF0dXJlUmVzdWx0LFxuICBDb21wdXRlZFNpZ25hbHMgZXh0ZW5kcyBTaWduYWxzRGljdGlvbmFyeVxuPihcbiAgc2lnbmFsc0ZhY3Rvcnk6IChcbiAgICBzdG9yZTogUHJldHRpZnk8U3RhdGVTaWduYWxzPElucHV0WydzdGF0ZSddPiAmIElucHV0Wydjb21wdXRlZCddPlxuICApID0+IENvbXB1dGVkU2lnbmFsc1xuKTogU2lnbmFsU3RvcmVGZWF0dXJlPFxuICBJbnB1dCxcbiAgRW1wdHlGZWF0dXJlUmVzdWx0ICYgeyBjb21wdXRlZDogQ29tcHV0ZWRTaWduYWxzIH1cbj4ge1xuICByZXR1cm4gKHN0b3JlKSA9PiB7XG4gICAgY29uc3QgY29tcHV0ZWRTaWduYWxzID0gc2lnbmFsc0ZhY3Rvcnkoe1xuICAgICAgLi4uc3RvcmUuc3RhdGVTaWduYWxzLFxuICAgICAgLi4uc3RvcmUuY29tcHV0ZWRTaWduYWxzLFxuICAgIH0pO1xuICAgIGNvbnN0IGNvbXB1dGVkU2lnbmFsc0tleXMgPSBPYmplY3Qua2V5cyhjb21wdXRlZFNpZ25hbHMpO1xuICAgIGNvbnN0IHN0YXRlU2lnbmFscyA9IGV4Y2x1ZGVLZXlzKHN0b3JlLnN0YXRlU2lnbmFscywgY29tcHV0ZWRTaWduYWxzS2V5cyk7XG4gICAgY29uc3QgbWV0aG9kcyA9IGV4Y2x1ZGVLZXlzKHN0b3JlLm1ldGhvZHMsIGNvbXB1dGVkU2lnbmFsc0tleXMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0b3JlLFxuICAgICAgc3RhdGVTaWduYWxzLFxuICAgICAgY29tcHV0ZWRTaWduYWxzOiB7IC4uLnN0b3JlLmNvbXB1dGVkU2lnbmFscywgLi4uY29tcHV0ZWRTaWduYWxzIH0sXG4gICAgICBtZXRob2RzLFxuICAgIH0gYXMgSW5uZXJTaWduYWxTdG9yZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgQ29tcHV0ZWRTaWduYWxzPjtcbiAgfTtcbn1cbiJdfQ==