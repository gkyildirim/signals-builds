import { computed, isSignal, untracked, } from '@angular/core';
export function toDeepSignal(signal) {
    const value = untracked(() => signal());
    if (!isRecord(value)) {
        return signal;
    }
    return new Proxy(signal, {
        get(target, prop) {
            if (!(prop in value)) {
                return target[prop];
            }
            if (!isSignal(target[prop])) {
                Object.defineProperty(target, prop, {
                    value: computed(() => target()[prop]),
                    configurable: true,
                });
            }
            return toDeepSignal(target[prop]);
        },
    });
}
function isRecord(value) {
    return value?.constructor === Object;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVlcC1zaWduYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9tb2R1bGVzL3NpZ25hbHMvc3JjL2RlZXAtc2lnbmFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxRQUFRLEVBQ1IsUUFBUSxFQUVSLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQW1CdkIsTUFBTSxVQUFVLFlBQVksQ0FBSSxNQUFpQjtJQUMvQyxNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN4QyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3BCLE9BQU8sTUFBdUIsQ0FBQztLQUNoQztJQUVELE9BQU8sSUFBSSxLQUFLLENBQUMsTUFBTSxFQUFFO1FBQ3ZCLEdBQUcsQ0FBQyxNQUFXLEVBQUUsSUFBSTtZQUNuQixJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLEVBQUU7Z0JBQ3BCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3JCO1lBRUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtnQkFDM0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFO29CQUNsQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNyQyxZQUFZLEVBQUUsSUFBSTtpQkFDbkIsQ0FBQyxDQUFDO2FBQ0o7WUFFRCxPQUFPLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNwQyxDQUFDO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELFNBQVMsUUFBUSxDQUFDLEtBQWM7SUFDOUIsT0FBTyxLQUFLLEVBQUUsV0FBVyxLQUFLLE1BQU0sQ0FBQztBQUN2QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY29tcHV0ZWQsXG4gIGlzU2lnbmFsLFxuICBTaWduYWwgYXMgTmdTaWduYWwsXG4gIHVudHJhY2tlZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJc0tub3duUmVjb3JkIH0gZnJvbSAnLi90cy1oZWxwZXJzJztcblxuLy8gQW4gZXh0ZW5kZWQgU2lnbmFsIHR5cGUgdGhhdCBlbmFibGVzIHRoZSBjb3JyZWN0IHR5cGluZ1xuLy8gb2YgbmVzdGVkIHNpZ25hbHMgd2l0aCB0aGUgYG5hbWVgIG9yIGBsZW5ndGhgIGtleS5cbmludGVyZmFjZSBTaWduYWw8VD4gZXh0ZW5kcyBOZ1NpZ25hbDxUPiB7XG4gIG5hbWU6IHVua25vd247XG4gIGxlbmd0aDogdW5rbm93bjtcbn1cblxuZXhwb3J0IHR5cGUgRGVlcFNpZ25hbDxUPiA9IFNpZ25hbDxUPiAmXG4gIChJc0tub3duUmVjb3JkPFQ+IGV4dGVuZHMgdHJ1ZVxuICAgID8gUmVhZG9ubHk8e1xuICAgICAgICBbSyBpbiBrZXlvZiBUXTogSXNLbm93blJlY29yZDxUW0tdPiBleHRlbmRzIHRydWVcbiAgICAgICAgICA/IERlZXBTaWduYWw8VFtLXT5cbiAgICAgICAgICA6IFNpZ25hbDxUW0tdPjtcbiAgICAgIH0+XG4gICAgOiB1bmtub3duKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRvRGVlcFNpZ25hbDxUPihzaWduYWw6IFNpZ25hbDxUPik6IERlZXBTaWduYWw8VD4ge1xuICBjb25zdCB2YWx1ZSA9IHVudHJhY2tlZCgoKSA9PiBzaWduYWwoKSk7XG4gIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgcmV0dXJuIHNpZ25hbCBhcyBEZWVwU2lnbmFsPFQ+O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm94eShzaWduYWwsIHtcbiAgICBnZXQodGFyZ2V0OiBhbnksIHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gdmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNTaWduYWwodGFyZ2V0W3Byb3BdKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCB7XG4gICAgICAgICAgdmFsdWU6IGNvbXB1dGVkKCgpID0+IHRhcmdldCgpW3Byb3BdKSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdG9EZWVwU2lnbmFsKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gdmFsdWU/LmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG59XG4iXX0=