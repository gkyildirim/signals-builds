import { excludeKeys } from './helpers';
import { STATE_SIGNAL } from './signal-state';
export function withMethods(methodsFactory) {
    return (store) => {
        const methods = methodsFactory({
            [STATE_SIGNAL]: store[STATE_SIGNAL],
            ...store.slices,
            ...store.signals,
            ...store.methods,
        });
        const methodsKeys = Object.keys(methods);
        const slices = excludeKeys(store.slices, methodsKeys);
        const signals = excludeKeys(store.signals, methodsKeys);
        return {
            ...store,
            slices,
            signals,
            methods: { ...store.methods, ...methods },
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2l0aC1tZXRob2RzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbW9kdWxlcy9zaWduYWxzL3NyYy93aXRoLW1ldGhvZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFtQixNQUFNLGdCQUFnQixDQUFDO0FBWS9ELE1BQU0sVUFBVSxXQUFXLENBSXpCLGNBT1k7SUFFWixPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDZixNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUM7WUFDN0IsQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDO1lBQ25DLEdBQUcsS0FBSyxDQUFDLE1BQU07WUFDZixHQUFHLEtBQUssQ0FBQyxPQUFPO1lBQ2hCLEdBQUcsS0FBSyxDQUFDLE9BQU87U0FDakIsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxNQUFNLE1BQU0sR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUN0RCxNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUV4RCxPQUFPO1lBQ0wsR0FBRyxLQUFLO1lBQ1IsTUFBTTtZQUNOLE9BQU87WUFDUCxPQUFPLEVBQUUsRUFBRSxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxPQUFPLEVBQUU7U0FDK0IsQ0FBQztJQUM3RSxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhjbHVkZUtleXMgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgU1RBVEVfU0lHTkFMLCBTaWduYWxTdGF0ZU1ldGEgfSBmcm9tICcuL3NpZ25hbC1zdGF0ZSc7XG5pbXBvcnQge1xuICBFbXB0eUZlYXR1cmVSZXN1bHQsXG4gIElubmVyU2lnbmFsU3RvcmUsXG4gIE1ldGhvZHNEaWN0aW9uYXJ5LFxuICBTaWduYWxzRGljdGlvbmFyeSxcbiAgU2lnbmFsU3RvcmVGZWF0dXJlLFxuICBTaWduYWxTdG9yZUZlYXR1cmVSZXN1bHQsXG4gIFNpZ25hbFN0b3JlU2xpY2VzLFxufSBmcm9tICcuL3NpZ25hbC1zdG9yZS1tb2RlbHMnO1xuaW1wb3J0IHsgUHJldHRpZnkgfSBmcm9tICcuL3RzLWhlbHBlcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gd2l0aE1ldGhvZHM8XG4gIElucHV0IGV4dGVuZHMgU2lnbmFsU3RvcmVGZWF0dXJlUmVzdWx0LFxuICBNZXRob2RzIGV4dGVuZHMgTWV0aG9kc0RpY3Rpb25hcnlcbj4oXG4gIG1ldGhvZHNGYWN0b3J5OiAoXG4gICAgc3RvcmU6IFByZXR0aWZ5PFxuICAgICAgU2lnbmFsU3RvcmVTbGljZXM8SW5wdXRbJ3N0YXRlJ10+ICZcbiAgICAgICAgSW5wdXRbJ3NpZ25hbHMnXSAmXG4gICAgICAgIElucHV0WydtZXRob2RzJ10gJlxuICAgICAgICBTaWduYWxTdGF0ZU1ldGE8UHJldHRpZnk8SW5wdXRbJ3N0YXRlJ10+PlxuICAgID5cbiAgKSA9PiBNZXRob2RzXG4pOiBTaWduYWxTdG9yZUZlYXR1cmU8SW5wdXQsIEVtcHR5RmVhdHVyZVJlc3VsdCAmIHsgbWV0aG9kczogTWV0aG9kcyB9PiB7XG4gIHJldHVybiAoc3RvcmUpID0+IHtcbiAgICBjb25zdCBtZXRob2RzID0gbWV0aG9kc0ZhY3Rvcnkoe1xuICAgICAgW1NUQVRFX1NJR05BTF06IHN0b3JlW1NUQVRFX1NJR05BTF0sXG4gICAgICAuLi5zdG9yZS5zbGljZXMsXG4gICAgICAuLi5zdG9yZS5zaWduYWxzLFxuICAgICAgLi4uc3RvcmUubWV0aG9kcyxcbiAgICB9KTtcbiAgICBjb25zdCBtZXRob2RzS2V5cyA9IE9iamVjdC5rZXlzKG1ldGhvZHMpO1xuICAgIGNvbnN0IHNsaWNlcyA9IGV4Y2x1ZGVLZXlzKHN0b3JlLnNsaWNlcywgbWV0aG9kc0tleXMpO1xuICAgIGNvbnN0IHNpZ25hbHMgPSBleGNsdWRlS2V5cyhzdG9yZS5zaWduYWxzLCBtZXRob2RzS2V5cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3RvcmUsXG4gICAgICBzbGljZXMsXG4gICAgICBzaWduYWxzLFxuICAgICAgbWV0aG9kczogeyAuLi5zdG9yZS5tZXRob2RzLCAuLi5tZXRob2RzIH0sXG4gICAgfSBhcyBJbm5lclNpZ25hbFN0b3JlPFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBTaWduYWxzRGljdGlvbmFyeSwgTWV0aG9kcz47XG4gIH07XG59XG4iXX0=