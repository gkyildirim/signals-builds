import { excludeKeys } from './helpers';
import { STATE_SIGNAL } from './state-signal';
export function withMethods(methodsFactory) {
    return (store) => {
        const methods = methodsFactory({
            [STATE_SIGNAL]: store[STATE_SIGNAL],
            ...store.stateSignals,
            ...store.computedSignals,
            ...store.methods,
        });
        const methodsKeys = Object.keys(methods);
        const stateSignals = excludeKeys(store.stateSignals, methodsKeys);
        const computedSignals = excludeKeys(store.computedSignals, methodsKeys);
        return {
            ...store,
            stateSignals,
            computedSignals,
            methods: { ...store.methods, ...methods },
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2l0aC1tZXRob2RzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbW9kdWxlcy9zaWduYWxzL3NyYy93aXRoLW1ldGhvZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFlLE1BQU0sZ0JBQWdCLENBQUM7QUFZM0QsTUFBTSxVQUFVLFdBQVcsQ0FJekIsY0FPWTtJQUVaLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNmLE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQztZQUM3QixDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUM7WUFDbkMsR0FBRyxLQUFLLENBQUMsWUFBWTtZQUNyQixHQUFHLEtBQUssQ0FBQyxlQUFlO1lBQ3hCLEdBQUcsS0FBSyxDQUFDLE9BQU87U0FDakIsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxNQUFNLFlBQVksR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNsRSxNQUFNLGVBQWUsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUV4RSxPQUFPO1lBQ0wsR0FBRyxLQUFLO1lBQ1IsWUFBWTtZQUNaLGVBQWU7WUFDZixPQUFPLEVBQUUsRUFBRSxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxPQUFPLEVBQUU7U0FDK0IsQ0FBQztJQUM3RSxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhjbHVkZUtleXMgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgU1RBVEVfU0lHTkFMLCBTdGF0ZVNpZ25hbCB9IGZyb20gJy4vc3RhdGUtc2lnbmFsJztcbmltcG9ydCB7XG4gIEVtcHR5RmVhdHVyZVJlc3VsdCxcbiAgSW5uZXJTaWduYWxTdG9yZSxcbiAgTWV0aG9kc0RpY3Rpb25hcnksXG4gIFNpZ25hbHNEaWN0aW9uYXJ5LFxuICBTaWduYWxTdG9yZUZlYXR1cmUsXG4gIFNpZ25hbFN0b3JlRmVhdHVyZVJlc3VsdCxcbiAgU3RhdGVTaWduYWxzLFxufSBmcm9tICcuL3NpZ25hbC1zdG9yZS1tb2RlbHMnO1xuaW1wb3J0IHsgUHJldHRpZnkgfSBmcm9tICcuL3RzLWhlbHBlcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gd2l0aE1ldGhvZHM8XG4gIElucHV0IGV4dGVuZHMgU2lnbmFsU3RvcmVGZWF0dXJlUmVzdWx0LFxuICBNZXRob2RzIGV4dGVuZHMgTWV0aG9kc0RpY3Rpb25hcnlcbj4oXG4gIG1ldGhvZHNGYWN0b3J5OiAoXG4gICAgc3RvcmU6IFByZXR0aWZ5PFxuICAgICAgU3RhdGVTaWduYWxzPElucHV0WydzdGF0ZSddPiAmXG4gICAgICAgIElucHV0Wydjb21wdXRlZCddICZcbiAgICAgICAgSW5wdXRbJ21ldGhvZHMnXSAmXG4gICAgICAgIFN0YXRlU2lnbmFsPFByZXR0aWZ5PElucHV0WydzdGF0ZSddPj5cbiAgICA+XG4gICkgPT4gTWV0aG9kc1xuKTogU2lnbmFsU3RvcmVGZWF0dXJlPElucHV0LCBFbXB0eUZlYXR1cmVSZXN1bHQgJiB7IG1ldGhvZHM6IE1ldGhvZHMgfT4ge1xuICByZXR1cm4gKHN0b3JlKSA9PiB7XG4gICAgY29uc3QgbWV0aG9kcyA9IG1ldGhvZHNGYWN0b3J5KHtcbiAgICAgIFtTVEFURV9TSUdOQUxdOiBzdG9yZVtTVEFURV9TSUdOQUxdLFxuICAgICAgLi4uc3RvcmUuc3RhdGVTaWduYWxzLFxuICAgICAgLi4uc3RvcmUuY29tcHV0ZWRTaWduYWxzLFxuICAgICAgLi4uc3RvcmUubWV0aG9kcyxcbiAgICB9KTtcbiAgICBjb25zdCBtZXRob2RzS2V5cyA9IE9iamVjdC5rZXlzKG1ldGhvZHMpO1xuICAgIGNvbnN0IHN0YXRlU2lnbmFscyA9IGV4Y2x1ZGVLZXlzKHN0b3JlLnN0YXRlU2lnbmFscywgbWV0aG9kc0tleXMpO1xuICAgIGNvbnN0IGNvbXB1dGVkU2lnbmFscyA9IGV4Y2x1ZGVLZXlzKHN0b3JlLmNvbXB1dGVkU2lnbmFscywgbWV0aG9kc0tleXMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0b3JlLFxuICAgICAgc3RhdGVTaWduYWxzLFxuICAgICAgY29tcHV0ZWRTaWduYWxzLFxuICAgICAgbWV0aG9kczogeyAuLi5zdG9yZS5tZXRob2RzLCAuLi5tZXRob2RzIH0sXG4gICAgfSBhcyBJbm5lclNpZ25hbFN0b3JlPFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBTaWduYWxzRGljdGlvbmFyeSwgTWV0aG9kcz47XG4gIH07XG59XG4iXX0=